
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Pushing data &mdash; KairosDB 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.3.4/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.3.4/css/bootstrap-none.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/kairosdb.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="_static/favicon.png"/>
    <link rel="top" title="KairosDB 1.0.1 documentation" href="index.html" />
    <link rel="next" title="Querying data" href="QueryingData.html" />
    <link rel="prev" title="Frequently Asked Questions" href="FAQ.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>




 <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand logo" href="http://kairosdb.github.io/"><img alt="Brand" src="_static/kairosdb.png"></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
			<li><a href="http://kairosdb.github.io/">Overview</a></li>
            <li class="active"><a href="index.html">Documentation</a></li>
            <li ><a href="https://groups.google.com/forum/?hl=en#!forum/kairosdb-group" target="_blank">Community</a></li>
            <li><a href="https://github.com/kairosdb/kairosdb">Github</a></li>
			
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
          </ul>
		  
        </div><!--/.nav-collapse -->
      </div>
    </nav>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav"><h3><a href="index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Pushing data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#submitting-data-via-telnet">Submitting data via telnet</a></li>
<li class="toctree-l2"><a class="reference internal" href="#submitting-data-via-rest">Submitting data via rest</a></li>
<li class="toctree-l2"><a class="reference internal" href="#graphite-protocol">Graphite protocol</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="QueryingData.html">Querying data</a></li>
<li class="toctree-l1"><a class="reference internal" href="ImportExport.html">Importing and Exporting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebUI.html">Web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="Statistics.html">KairosDB Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="KairosClient.html">Kairos DB Java Client Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="CassandraSchema.html">Cassandra Schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="Roll-ups.html">Roll-ups</a></li>
<li class="toctree-l1"><a class="reference internal" href="kairosdevelopment/index.html">Kairos Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="restapi/index.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="telnetapi/index.html">Telnet API</a></li>
<li class="toctree-l1"><a class="reference internal" href="Graphite.html">Graphite Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="IssueTracking.html">Bug Tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="External.html">External links</a></li>
</ul>

<form action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9">
      
  <div class="section" id="pushing-data">
<h1>Pushing data<a class="headerlink" href="#pushing-data" title="Permalink to this headline">¶</a></h1>
<p>You can submit data either with the telnet protocol on port 4242 or the rest protocol on port 8080 (ports can be changed in the kairosdb.properties file).  Other mechanisms exist for getting data into KairosDB.  A list of plugins and external projects can be found on the <a class="reference external" href="https://github.com/proofpoint/kairosdb/wiki/External-projects,-libraries-and-stuff.">external projects page</a>.</p>
<blockquote>
<div><strong>Note:</strong> Of the two default protocols only the rest protocol handles custom data types.</div></blockquote>
<p>A great client for testing data in and out is [<a class="reference external" href="http://code.google.com/p/rest-client/">http://code.google.com/p/rest-client/</a>]</p>
<div class="section" id="submitting-data-via-telnet">
<h2>Submitting data via telnet<a class="headerlink" href="#submitting-data-via-telnet" title="Permalink to this headline">¶</a></h2>
<p>The format of the data is</p>
<div class="highlight-python"><div class="highlight"><pre>put &lt;metric name&gt; &lt;time stamp&gt; &lt;value&gt; &lt;tag&gt; &lt;tag&gt;... \n
</pre></div>
</div>
<p><strong>Metric name</strong> must be one word and is limited to alpha numerics with &#8220;-_.&#8221;.</p>
<p><strong>Time stamp</strong> can either be in milliseconds or in seconds since Jan 1, 1970 (unix epoch) - seconds are for backwards compatibility with the original opentsdb.  The Cassandra datastore supports milliseconds.</p>
<blockquote>
<div><strong>Note:</strong> The REST API only supports a timestamp in milliseconds.</div></blockquote>
<p><strong>Value</strong> can either be a long or double value.</p>
<p><strong>Tag</strong> is in the form of key=value.</p>
<p>Be aware that the data sent must be followed by a line feed character.</p>
<p>Here is a simple shell script that inserts data using netcat.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/bin/bash</span>

<span class="c"># Current time in milliseconds</span>
<span class="nv">now</span><span class="o">=</span><span class="k">$(($(</span>date +%s%N<span class="k">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>
<span class="nv">metric</span><span class="o">=</span>load_value_test
<span class="nv">value</span><span class="o">=</span>42
<span class="nv">host</span><span class="o">=</span>10.92.4.4

<span class="nb">echo</span> <span class="s2">&quot;put $metric $now $value host=A&quot;</span> | nc -w 30 <span class="nv">$host</span> 4242
</pre></div>
</div>
</div>
<div class="section" id="submitting-data-via-rest">
<h2>Submitting data via rest<a class="headerlink" href="#submitting-data-via-rest" title="Permalink to this headline">¶</a></h2>
<p>The url for submitting data is <a class="reference external" href="http://localhost:8080/api/v1/datapoints">http://localhost:8080/api/v1/datapoints</a></p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">[{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;archive.file.tracked&quot;</span><span class="p">,</span>
    <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="mi">1349109376</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;long&quot;</span><span class="p">,</span>
    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="nt">&quot;tags&quot;</span><span class="p">:{</span><span class="nt">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;test&quot;</span><span class="p">}</span>
<span class="p">},</span>
<span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;archive.file.search&quot;</span><span class="p">,</span>
    <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="mi">999</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;double&quot;</span><span class="p">,</span>
    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">32.1</span><span class="p">,</span>
    <span class="nt">&quot;tags&quot;</span><span class="p">:{</span><span class="nt">&quot;host&quot;</span><span class="p">:</span><span class="s2">&quot;test&quot;</span><span class="p">}</span>
<span class="p">}]</span>
</pre></div>
</div>
<p>In the case of the rest api the timestamp is always treated as milliseconds since Jan 1, 1970.  If you are writing to HBase it is truncated off to the second.</p>
<p>See the <a class="reference internal" href="restapi/AddDataPoints.html"><em>REST API documentation</em></a> for more details</p>
</div>
<div class="section" id="graphite-protocol">
<h2>Graphite protocol<a class="headerlink" href="#graphite-protocol" title="Permalink to this headline">¶</a></h2>
<p>KairosDB now supports the Graphite plaintext and pickle protocol as explained <a class="reference external" href="https://graphite.readthedocs.org/en/latest/feeding-carbon.html">here</a>.  This lets you integrate KairosDB with existing applications that push data to Graphite.  Please see the <a class="reference external" href="https://github.com/proofpoint/kairosdb/wiki/External-projects,-libraries-and-stuff.">external projects page</a> for a link to the plugin.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, KairosDB Team.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>