
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Query Metric Tags &#8212; KairosDB 1.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-3.3.4/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-3.3.4/css/bootstrap-none.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/kairosdb.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Roll-ups" href="Roll-ups.html" />
    <link rel="prev" title="Query Metrics" href="QueryMetrics.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>




 <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand logo" href="http://kairosdb.github.io/"><img alt="Brand" src="../_static/kairosdb.png"></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
			<li><a href="http://kairosdb.github.io/">Overview</a></li>
            <li class="active"><a href="../index.html">Documentation</a></li>
            <li ><a href="https://groups.google.com/forum/?hl=en#!forum/kairosdb-group" target="_blank">Community</a></li>
            <li><a href="https://github.com/kairosdb/kairosdb">Github</a></li>
			
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
          </ul>
		  
        </div><!--/.nav-collapse -->
      </div>
    </nav>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav"><h3><a href="../index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PushingData.html">Pushing data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../QueryingData.html">Querying data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ImportExport.html">Importing and Exporting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WebUI.html">Web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Statistics.html">KairosDB Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../KairosClient.html">Kairos DB Java Client Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CassandraSchema.html">Cassandra Schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MultiCluster.html">Multi Cluster Cassandra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Roll-ups.html">Roll-ups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kairosdevelopment/index.html">Kairos Development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">REST API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="Aggregators.html">Aggregators</a></li>
<li class="toctree-l2"><a class="reference internal" href="AddDataPoints.html">Add Data Points</a></li>
<li class="toctree-l2"><a class="reference internal" href="DeleteDataPoints.html">Delete Data Points</a></li>
<li class="toctree-l2"><a class="reference internal" href="DeleteMetric.html">Delete Metric</a></li>
<li class="toctree-l2"><a class="reference internal" href="Features.html">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="Health.html">Health Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="ListMetricNames.html">List Metric Names</a></li>
<li class="toctree-l2"><a class="reference internal" href="Metadata.html">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="Metadata.html#add-the-value">Add the Value</a></li>
<li class="toctree-l2"><a class="reference internal" href="Metadata.html#get-the-value">Get the Value</a></li>
<li class="toctree-l2"><a class="reference internal" href="Metadata.html#list-service-keys">List Service Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="Metadata.html#list-keys">List Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="Metadata.html#delete-key">Delete Key</a></li>
<li class="toctree-l2"><a class="reference internal" href="QueryMetrics.html">Query Metrics</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Query Metric Tags</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#filtering">Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#method">Method</a></li>
<li class="toctree-l3"><a class="reference internal" href="#request">Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#body">Body</a></li>
<li class="toctree-l3"><a class="reference internal" href="#query-properties">Query Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metric-properties">Metric Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#response">Response</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Roll-ups.html">Roll-ups</a></li>
<li class="toctree-l2"><a class="reference internal" href="Roll-ups.html#create-roll-up-task">Create Roll-up Task</a></li>
<li class="toctree-l2"><a class="reference internal" href="Roll-ups.html#list-roll-up-tasks">List Roll-up Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="Roll-ups.html#get-roll-up-task">Get Roll-up Task</a></li>
<li class="toctree-l2"><a class="reference internal" href="Roll-ups.html#delete-roll-up-task">Delete Roll-up Task</a></li>
<li class="toctree-l2"><a class="reference internal" href="Roll-ups.html#update-roll-up-task">Update Roll-up Task</a></li>
<li class="toctree-l2"><a class="reference internal" href="Roll-ups.html#backfill-roll-up-task">Backfill Roll-up Task</a></li>
<li class="toctree-l2"><a class="reference internal" href="Version.html">Version</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../telnetapi/index.html">Telnet API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Graphite.html">Graphite Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IssueTracking.html">Bug Tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../External.html">External links</a></li>
</ul>

<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9">
      
  <div class="section" id="query-metric-tags">
<h1>Query Metric Tags<a class="headerlink" href="#query-metric-tags" title="Permalink to this headline">Â¶</a></h1>
<p>Similar to a query but only returns the tags (no data points returned). This can potentially return more tags than a
query because it is optimized for speed and does not query all rows to narrow down the time range. This queries only
the Row Key Index and thus the time range is the starting time range. Since the Cassandra row is set to 3 weeks, this
can return tags for up to a 3 week period. See <a class="reference internal" href="../CassandraSchema.html"><span class="doc">Cassandra Schema</span></a>.</p>
<div class="section" id="filtering">
<h2>Filtering<a class="headerlink" href="#filtering" title="Permalink to this headline">Â¶</a></h2>
<p>It is possible to filter the tags returned by specifying a tag.</p>
</div>
<div class="section" id="method">
<h2>Method<a class="headerlink" href="#method" title="Permalink to this headline">Â¶</a></h2>
<blockquote>
<div>POST</div></blockquote>
</div>
<div class="section" id="request">
<h2>Request<a class="headerlink" href="#request" title="Permalink to this headline">Â¶</a></h2>
<blockquote>
<div><a class="reference external" href="http://[host]:[port]/api/v1/datapoints/query/tags">http://[host]:[port]/api/v1/datapoints/query/tags</a></div></blockquote>
</div>
<div class="section" id="body">
<h2>Body<a class="headerlink" href="#body" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;start_absolute&quot;</span><span class="p">:</span> <span class="mi">1357023600000</span><span class="p">,</span>
   <span class="nt">&quot;end_relative&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span>
       <span class="nt">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;days&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="p">{</span>
           <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;server1&quot;</span><span class="p">]</span>
           <span class="p">},</span>
           <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;abc_123&quot;</span>
       <span class="p">},</span>
       <span class="p">{</span>
           <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span>
               <span class="nt">&quot;dc&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;awsuse&quot;</span><span class="p">]</span>
           <span class="p">},</span>
           <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;xyz_123&quot;</span>
       <span class="p">}</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="query-properties">
<h2>Query Properties<a class="headerlink" href="#query-properties" title="Permalink to this headline">Â¶</a></h2>
<p>You must specify either <em>start_absolute</em> or <em>start_relative</em> but not both. Similarly, you may specify either <em>end_absolute</em> or <em>end_relative</em> but not both. If either end time is not specified the current date and time is assumed.</p>
<p><em>start_absolute</em>
The time in milliseconds.</p>
<p><em>start_relative</em>
The relative start time is the current date and time minus the specified value and unit. Possible unit values are âmillisecondsâ, âsecondsâ, âminutesâ, âhoursâ, âdaysâ, âweeksâ, âmonthsâ, and âyearsâ. For example, if the start time is 5 minutes, the query will return all matching data points for the last 5 minutes.</p>
<p><em>end_absolute</em>
The time in milliseconds. This must be later in time than the start time. If not specified, the end time is assumed to be the current date and time.</p>
<p><em>end_relative</em>
The relative end time is the current date and time minus the specified value and unit. Possible unit values are âmillisecondsâ, âsecondsâ, âminutesâ, âhoursâ, âdaysâ, âweeksâ, âmonthsâ, and âyearsâ. For example, if the start time is 30 minutes and the end time is 10 minutes, the query returns matching data points that occurred between the last 30 minutes up to and including the last 10 minutes. If not specified, the end time is assumed to the current date and time.</p>
</div>
<div class="section" id="metric-properties">
<h2>Metric Properties<a class="headerlink" href="#metric-properties" title="Permalink to this headline">Â¶</a></h2>
<p><em>name</em></p>
<p>The name of the metric(s) to return data points for. The name is required.</p>
<p><em>tags</em></p>
<p>Tags narrow down the search. Only metrics that include the tag and matches one of the values are returned. Tags is optional.</p>
</div>
<div class="section" id="response">
<h2>Response<a class="headerlink" href="#response" title="Permalink to this headline">Â¶</a></h2>
<p><em>Success</em></p>
<blockquote>
<div><p>The response contains either the metric values or possible error values. Returns 200 for successful queries.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;queries&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;abc_123&quot;</span><span class="p">,</span>
          <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;server1&quot;</span><span class="p">],</span>
            <span class="nt">&quot;dc&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;awsuse&quot;</span><span class="p">,</span> <span class="s2">&quot;awsusw&quot;</span><span class="p">],</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;bar&quot;</span><span class="p">]</span>
          <span class="p">},</span>
        <span class="nt">&quot;values&quot;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;xyz_123&quot;</span><span class="p">,</span>
          <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;server1&quot;</span><span class="p">,</span><span class="s2">&quot;server2&quot;</span><span class="p">],</span>
            <span class="nt">&quot;dc&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;awsuse&quot;</span><span class="p">],</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;bar&quot;</span><span class="p">]</span>
          <span class="p">},</span>
        <span class="nt">&quot;values&quot;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p><em>Failure</em></p>
<blockquote>
<div><p>The response will be 400 Bad Request if the request is invalid.</p>
<p>The response will be 500 Internal Server Error if an error occurs retrieving data.</p>
</div></blockquote>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2022, KairosDB Team.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.<br/>
    </p>
  </div>
</footer>
  </body>
</html>